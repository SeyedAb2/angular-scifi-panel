import{f as zt}from"./chunk-NY5Z634K.js";import{A as Rt}from"./chunk-P4V3WCAY.js";import{C as Je}from"./chunk-MEI35UML.js";import{Cb as Dt,Ha as Ve,Ja as At,q as Be,s as Tt,ua as Fe,va as He,xa as Nt,za as Ot}from"./chunk-4AWAHJA5.js";import{a as T,b as R}from"./chunk-FFXK657A.js";var ti=i=>i.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),ni=i=>{let e={};return Object.keys(i).forEach(t=>{i[t]&&(e[t]=i[t])}),e},ue=i=>{let e=ni(i);return Object.entries(e).map(([t,n])=>`${ti(t)}:${n}`).join(";")};var Pt=(i,e,t)=>Math.min(Math.max(i,e),t);function S(i){this.content=i}S.prototype={constructor:S,find:function(i){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===i)return e;return-1},get:function(i){var e=this.find(i);return e==-1?void 0:this.content[e+1]},update:function(i,e,t){var n=t&&t!=i?this.remove(t):this,r=n.find(i),o=n.content.slice();return r==-1?o.push(t||i,e):(o[r+1]=e,t&&(o[r]=t)),new S(o)},remove:function(i){var e=this.find(i);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new S(t)},addToStart:function(i,e){return new S([i,e].concat(this.remove(i).content))},addToEnd:function(i,e){var t=this.remove(i).content.slice();return t.push(i,e),new S(t)},addBefore:function(i,e,t){var n=this.remove(e),r=n.content.slice(),o=n.find(i);return r.splice(o==-1?r.length:o,0,e,t),new S(r)},forEach:function(i){for(var e=0;e<this.content.length;e+=2)i(this.content[e],this.content[e+1])},prepend:function(i){return i=S.from(i),i.size?new S(i.content.concat(this.subtract(i).content)):this},append:function(i){return i=S.from(i),i.size?new S(this.subtract(i).content.concat(i.content)):this},subtract:function(i){var e=this;i=S.from(i);for(var t=0;t<i.content.length;t+=2)e=e.remove(i.content[t]);return e},toObject:function(){var i={};return this.forEach(function(e,t){i[e]=t}),i},get size(){return this.content.length>>1}};S.from=function(i){if(i instanceof S)return i;var e=[];if(i)for(var t in i)e.push(t,i[t]);return new S(e)};var $e=S;function Wt(i,e,t){for(let n=0;;n++){if(n==i.childCount||n==e.childCount)return i.childCount==e.childCount?null:t;let r=i.child(n),o=e.child(n);if(r==o){t+=r.nodeSize;continue}if(!r.sameMarkup(o))return t;if(r.isText&&r.text!=o.text){for(let s=0;r.text[s]==o.text[s];s++)t++;return t}if(r.content.size||o.content.size){let s=Wt(r.content,o.content,t+1);if(s!=null)return s}t+=r.nodeSize}}function jt(i,e,t,n){for(let r=i.childCount,o=e.childCount;;){if(r==0||o==0)return r==o?null:{a:t,b:n};let s=i.child(--r),l=e.child(--o),a=s.nodeSize;if(s==l){t-=a,n-=a;continue}if(!s.sameMarkup(l))return{a:t,b:n};if(s.isText&&s.text!=l.text){let c=0,u=Math.min(s.text.length,l.text.length);for(;c<u&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,t--,n--;return{a:t,b:n}}if(s.content.size||l.content.size){let c=jt(s.content,l.content,t-1,n-1);if(c)return c}t-=a,n-=a}}var f=class i{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,o){for(let s=0,l=0;l<t;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&n(a,r+l,o||null,s)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,t-u),n,r+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let o="",s=!0;return this.nodesBetween(e,t,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,t-a):l.isLeaf?r?typeof r=="function"?r(l):r:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&n&&(s?s=!1:o+=n),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new i(r,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let n=[],r=0;if(t>e)for(let o=0,s=0;s<t;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,t-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,t-s-1))),n.push(l),r+=l.nodeSize),s=a}return new i(n,r)}cutByIndex(e,t){return e==t?i.empty:e==0&&t==this.content.length?this:new i(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new i(r,o)}addToStart(e){return new i([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new i(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return Wt(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return jt(this,e,t,n)}findIndex(e,t=-1){if(e==0)return pe(0,e);if(e==this.size)return pe(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),s=r+o.nodeSize;if(s>=e)return s==e||t>0?pe(n+1,s):pe(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return i.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return i.empty;let t,n=0;for(let r=0;r<e.length;r++){let o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new i(t||e,n)}static from(e){if(!e)return i.empty;if(e instanceof i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new i([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};f.empty=new f([],0);var We={index:0,offset:0};function pe(i,e){return We.index=i,We.offset=e,We}function de(i,e){if(i===e)return!0;if(!(i&&typeof i=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(i);if(Array.isArray(e)!=t)return!1;if(t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!de(i[n],e[n]))return!1}else{for(let n in i)if(!(n in e)||!de(i[n],e[n]))return!1;for(let n in e)if(!(n in i))return!1}return!0}var _=(()=>{class i{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let o=0;o<t.length;o++){let s=t[o];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,o));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&de(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return i.none;if(t instanceof i)return[t];let n=t.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}}return i.none=[],i})(),J=class extends Error{},x=class i{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=Ut(this.content,e+this.openStart,t);return n&&new i(n,this.openStart,this.openEnd)}removeBetween(e,t){return new i(qt(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return i.empty;let n=t.openStart||0,r=t.openEnd||0;if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new i(f.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new i(e,n,r)}};x.empty=new x(f.empty,0,0);function qt(i,e,t){let{index:n,offset:r}=i.findIndex(e),o=i.maybeChild(n),{index:s,offset:l}=i.findIndex(t);if(r==e||o.isText){if(l!=t&&!i.child(s).isText)throw new RangeError("Removing non-flat range");return i.cut(0,e).append(i.cut(t))}if(n!=s)throw new RangeError("Removing non-flat range");return i.replaceChild(n,o.copy(qt(o.content,e-r-1,t-r-1)))}function Ut(i,e,t,n){let{index:r,offset:o}=i.findIndex(e),s=i.maybeChild(r);if(o==e||s.isText)return n&&!n.canReplace(r,r,t)?null:i.cut(0,e).append(t).append(i.cut(e));let l=Ut(s.content,e-o-1,t);return l&&i.replaceChild(r,s.copy(l))}function ii(i,e,t){if(t.openStart>i.depth)throw new J("Inserted content deeper than insertion position");if(i.depth-t.openStart!=e.depth-t.openEnd)throw new J("Inconsistent open depths");return Kt(i,e,t,0)}function Kt(i,e,t,n){let r=i.index(n),o=i.node(n);if(r==e.index(n)&&n<i.depth-t.openStart){let s=Kt(i,e,t,n+1);return o.copy(o.content.replaceChild(r,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&i.depth==n&&e.depth==n){let s=i.parent,l=s.content;return V(s,l.cut(0,i.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=ri(t,i);return V(o,Qt(i,s,l,e,n))}else return V(o,he(i,e,n))}function Gt(i,e){if(!e.type.compatibleContent(i.type))throw new J("Cannot join "+e.type.name+" onto "+i.type.name)}function je(i,e,t){let n=i.node(t);return Gt(n,e.node(t)),n}function H(i,e){let t=e.length-1;t>=0&&i.isText&&i.sameMarkup(e[t])?e[t]=i.withText(e[t].text+i.text):e.push(i)}function te(i,e,t,n){let r=(e||i).node(t),o=0,s=e?e.index(t):r.childCount;i&&(o=i.index(t),i.depth>t?o++:i.textOffset&&(H(i.nodeAfter,n),o++));for(let l=o;l<s;l++)H(r.child(l),n);e&&e.depth==t&&e.textOffset&&H(e.nodeBefore,n)}function V(i,e){return i.type.checkContent(e),i.copy(e)}function Qt(i,e,t,n,r){let o=i.depth>r&&je(i,e,r+1),s=n.depth>r&&je(t,n,r+1),l=[];return te(null,i,r,l),o&&s&&e.index(r)==t.index(r)?(Gt(o,s),H(V(o,Qt(i,e,t,n,r+1)),l)):(o&&H(V(o,he(i,e,r+1)),l),te(e,t,r,l),s&&H(V(s,he(t,n,r+1)),l)),te(n,null,r,l),new f(l)}function he(i,e,t){let n=[];if(te(null,i,t,n),i.depth>t){let r=je(i,e,t+1);H(V(r,he(i,e,t+1)),n)}return te(e,null,t,n),new f(n)}function ri(i,e){let t=e.depth-i.openStart,r=e.node(t).copy(i.content);for(let o=t-1;o>=0;o--)r=e.node(o).copy(f.from(r));return{start:r.resolveNoCache(i.openStart+t),end:r.resolveNoCache(r.content.size-i.openEnd-t)}}var fe=class i{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[t*3],r=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)r+=n.child(o).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return _.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let l=n;n=r,r=l}let o=n.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!r||!o[s].isInSet(r.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)n[o].type.spec.inclusive===!1&&(!r||!n[o].isInSet(r.marks))&&(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new $(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,o=t;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),c=o-a;if(n.push(s,l,r+a),!c||(s=s.child(l),s.isText))break;o=c-1,r+=a+1}return new i(t,n,o)}static resolveCached(e,t){let n=Lt.get(e);if(n)for(let o=0;o<n.elts.length;o++){let s=n.elts[o];if(s.pos==t)return s}else Lt.set(e,n=new qe);let r=n.elts[n.i]=i.resolve(e,t);return n.i=(n.i+1)%oi,r}},qe=class{constructor(){this.elts=[],this.i=0}},oi=12,Lt=new WeakMap,$=class{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},si=Object.create(null),A=class i{constructor(e,t,n,r=_.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||f.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&de(this.attrs,t||e.defaultAttrs||si)&&_.sameSet(this.marks,n||_.none)}copy(e=null){return e==this.content?this:new i(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new i(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return x.empty;let r=this.resolve(e),o=this.resolve(t),s=n?0:r.sharedDepth(t),l=r.start(s),c=r.node(s).content.cut(r.pos-l,o.pos-l);return new x(c,r.depth-s,o.depth-s)}replace(e,t,n){return ii(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return fe.resolveCached(this,e)}resolveNoCache(e){return fe.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,o=>(n.isInSet(o.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Xt(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=f.empty,r=0,o=n.childCount){let s=this.contentMatchAt(e).matchFragment(n,r,o),l=s&&s.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(n),s=o&&o.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=_.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!_.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=f.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,r,n);return o.type.checkAttrs(o.attrs),o}};A.prototype.text=void 0;var Ue=class i extends A{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Xt(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new i(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new i(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function Xt(i,e){for(let t=i.length-1;t>=0;t--)e=i[t].type.name+"("+e+")";return e}var W=class i{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new Ke(e,t);if(n.next==null)return i.empty;let r=Yt(n);n.next&&n.err("Unexpected trailing text");let o=hi(di(r));return fi(o,n),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];function o(s,l){let a=s.matchFragment(e,n);if(a&&(!t||a.validEnd))return f.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:p}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&r.indexOf(p)==-1){r.push(p);let h=o(p,l.concat(u));if(h)return h}}return null}return o(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),o=r.match;if(o.matchType(e)){let s=[];for(let l=r;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!r.type||a.validEnd)&&(n.push({match:l.contentMatch,type:l,via:r}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let r=0;r<n.next.length;r++)e.indexOf(n.next[r].next)==-1&&t(n.next[r].next)}return t(this),e.map((n,r)=>{let o=r+(n.validEnd?"*":" ")+" ";for(let s=0;s<n.next.length;s++)o+=(s?", ":"")+n.next[s].type.name+"->"+e.indexOf(n.next[s].next);return o}).join(`
`)}};W.empty=new W(!0);var Ke=class{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function Yt(i){let e=[];do e.push(li(i));while(i.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function li(i){let e=[];do e.push(ai(i));while(i.next&&i.next!=")"&&i.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function ai(i){let e=pi(i);for(;;)if(i.eat("+"))e={type:"plus",expr:e};else if(i.eat("*"))e={type:"star",expr:e};else if(i.eat("?"))e={type:"opt",expr:e};else if(i.eat("{"))e=ci(i,e);else break;return e}function Bt(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let e=Number(i.next);return i.pos++,e}function ci(i,e){let t=Bt(i),n=t;return i.eat(",")&&(i.next!="}"?n=Bt(i):n=-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}function ui(i,e){let t=i.nodeTypes,n=t[e];if(n)return[n];let r=[];for(let o in t){let s=t[o];s.isInGroup(e)&&r.push(s)}return r.length==0&&i.err("No node type or group '"+e+"' found"),r}function pi(i){if(i.eat("(")){let e=Yt(i);return i.eat(")")||i.err("Missing closing paren"),e}else if(/\W/.test(i.next))i.err("Unexpected token '"+i.next+"'");else{let e=ui(i,i.next).map(t=>(i.inline==null?i.inline=t.isInline:i.inline!=t.isInline&&i.err("Mixing inline and block content"),{type:"name",value:t}));return i.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function di(i){let e=[[]];return r(o(i,0),t()),e;function t(){return e.push([])-1}function n(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function r(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(o(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=o(s.exprs[a],l);if(a==s.exprs.length-1)return c;r(c,l=t())}else if(s.type=="star"){let a=t();return n(l,a),r(o(s.expr,a),a),[n(a)]}else if(s.type=="plus"){let a=t();return r(o(s.expr,l),a),r(o(s.expr,a),a),[n(a)]}else{if(s.type=="opt")return[n(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let u=t();r(o(s.expr,a),u),a=u}if(s.max==-1)r(o(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let u=t();n(a,u),r(o(s.expr,a),u),a=u}return[n(a)]}else{if(s.type=="name")return[n(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Zt(i,e){return e-i}function Ft(i,e){let t=[];return n(e),t.sort(Zt);function n(r){let o=i[r];if(o.length==1&&!o[0].term)return n(o[0].to);t.push(r);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&t.indexOf(a)==-1&&n(a)}}}function hi(i){let e=Object.create(null);return t(Ft(i,0));function t(n){let r=[];n.forEach(s=>{i[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<r.length;u++)r[u][0]==l&&(c=r[u][1]);Ft(i,a).forEach(u=>{c||r.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[n.join(",")]=new W(n.indexOf(i.length-1)>-1);for(let s=0;s<r.length;s++){let l=r[s][1].sort(Zt);o.next.push({type:r[s][0],next:e[l.join(",")]||t(l)})}return o}}function fi(i,e){for(let t=0,n=[i];t<n.length;t++){let r=n[t],o=!r.validEnd,s=[];for(let l=0;l<r.next.length;l++){let{type:a,next:c}=r.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),n.indexOf(c)==-1&&n.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function en(i){let e=Object.create(null);for(let t in i){let n=i[t];if(!n.hasDefault)return null;e[t]=n.default}return e}function tn(i,e){let t=Object.create(null);for(let n in i){let r=e&&e[n];if(r===void 0){let o=i[n];if(o.hasDefault)r=o.default;else throw new RangeError("No value supplied for attribute "+n)}t[n]=r}return t}function nn(i,e,t,n){for(let r in e)if(!(r in i))throw new RangeError(`Unsupported attribute ${r} for ${t} of type ${r}`);for(let r in i){let o=i[r];o.validate&&o.validate(e[r])}}function rn(i,e){let t=Object.create(null);if(e)for(let n in e)t[n]=new Ge(i,n,e[n]);return t}var me=class i{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=rn(e,n.attrs),this.defaultAttrs=en(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==W.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:tn(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new A(this,this.computeAttrs(e),f.from(t),_.setFrom(n))}createChecked(e=null,t,n){return t=f.from(t),this.checkContent(t),new A(this,this.computeAttrs(e),t,_.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=f.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let r=this.contentMatch.matchFragment(t),o=r&&r.fillBefore(f.empty,!0);return o?new A(this,e,t.append(o),_.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){nn(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:_.none:e}static compile(e,t){let n=Object.create(null);e.forEach((o,s)=>n[o]=new i(o,t,s));let r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function mi(i,e,t){let n=t.split("|");return r=>{let o=r===null?"null":typeof r;if(n.indexOf(o)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${i}, got ${o}`)}}var Ge=class{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?mi(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}},ge=class i{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=rn(e,r.attrs),this.excluded=null;let o=en(this.attrs);this.instance=o?new _(this,o):null}create(e=null){return!e&&this.instance?this.instance:new _(this,tn(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((o,s)=>n[o]=new i(o,r++,t,s)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){nn(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}},xe=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=$e.from(e.nodes),t.marks=$e.from(e.marks||{}),this.nodes=me.compile(this.spec.nodes,this),this.marks=ge.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let o=this.nodes[r],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=n[s]||(n[s]=W.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?Ht(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let r in this.marks){let o=this.marks[r],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Ht(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof me){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new Ue(n,n.defaultAttrs,e,_.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return A.fromJSON(this,e)}markFromJSON(e){return _.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}};function Ht(i,e){let t=[];for(let n=0;n<e.length;n++){let r=e[n],o=i.marks[r],s=o;if(o)t.push(o);else for(let l in i.marks){let a=i.marks[l];(r=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(r)>-1)&&t.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return t}function gi(i){return i.tag!=null}function xi(i){return i.style!=null}var we=class i{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(r=>{if(gi(r))this.tags.push(r);else if(xi(r)){let o=/[^=]*/.exec(r.style)[0];n.indexOf(o)<0&&n.push(o),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=e.nodes[r.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let n=new ye(this,t,!1);return n.addAll(e,_.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new ye(this,t,!0);return n.addAll(e,_.none,t.from,t.to),x.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let o=this.tags[r];if(_i(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,t,n,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!n.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let t=[];function n(r){let o=r.priority==null?50:r.priority,s=0;for(;s<t.length;s++){let l=t[s];if((l.priority==null?50:l.priority)<o)break}t.splice(s,0,r)}for(let r in e.marks){let o=e.marks[r].spec.parseDOM;o&&o.forEach(s=>{n(s=Jt(s)),s.mark||s.ignore||s.clearMark||(s.mark=r)})}for(let r in e.nodes){let o=e.nodes[r].spec.parseDOM;o&&o.forEach(s=>{n(s=Jt(s)),s.node||s.ignore||s.mark||(s.node=r)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new i(e,i.schemaRules(e)))}},on={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wi={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},sn={ol:!0,ul:!0},ie=1,Qe=2,ne=4;function Vt(i,e,t){return e!=null?(e?ie:0)|(e==="full"?Qe:0):i&&i.whitespace=="pre"?ie|Qe:t&~ne}var U=class{constructor(e,t,n,r,o,s){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=s,this.content=[],this.activeMarks=_.none,this.match=o||(s&ne?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(f.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let n=this.type.contentMatch,r;return(r=n.findWrapping(e.type))?(this.match=n,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ie)){let n=this.content[this.content.length-1],r;if(n&&n.isText&&(r=/[ \t\r\n\u000c]+$/.exec(n.text))){let o=n;n.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-r[0].length))}}let t=f.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(f.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!on.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},ye=class{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r=t.topNode,o,s=Vt(null,t.preserveWhitespace,0)|(n?ne:0);r?o=new U(r.type,r.attrs,_.none,!0,t.topMatch||r.type.contentMatch,s):n?o=new U(null,null,_.none,!0,null,s):o=new U(e.schema.topNodeType,null,_.none,!0,null,s),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,o=r.options&Qe?"full":this.localPreserveWS||(r.options&ie)>0;if(o==="full"||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(o)o!=="full"?n=n.replace(/\r?\n|\r/g," "):n=n.replace(/\r\n?/g,`
`);else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let s=r.content[r.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;sn.hasOwnProperty(s)&&this.parser.normalizeLists&&yi(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,n));e:if(a?a.ignore:wi.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(on.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let p=a&&a.skip?t:this.readStyles(e,t);p&&this.addAll(e,p),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,t);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=r}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let o=this.parser.matchedStyles[r],s=n.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?t=t.filter(c=>!a.clearMark(c)):t=t.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return t}addElementByRule(e,t,n,r){let o,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let a=this.enter(s,t.attrs||null,n,t.preserveWhitespace);a&&(o=!0,n=a)}else{let a=this.parser.schema.marks[t.mark];n=n.concat(a.create(t.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,n,!1));else{let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a,n),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,t,n,r){let o=n||0;for(let s=n?e.childNodes[n]:e.firstChild,l=r==null?null:e.childNodes[r];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,t);this.findAtPoint(e,o)}findPlace(e,t,n){let r,o;for(let s=this.open,l=0;s>=0;s--){let a=this.nodes[s],c=a.findWrapping(e);if(c&&(!r||r.length>c.length+l)&&(r=c,o=a,!c.length))break;if(a.solid){if(n)break;l+=2}}if(!r)return null;this.sync(o);for(let s=0;s<r.length;s++)t=this.enterInner(r[s],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let r=this.findPlace(e,t,n);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=_.none;for(let l of r.concat(e.marks))(o.type?o.type.allowsMarkType(l.type):$t(l.type,e.type))&&(s=l.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,t,n,r){let o=this.findPlace(e.create(t),n,!1);return o&&(o=this.enterInner(e,t,n,!0,r)),o}enterInner(e,t,n,r=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=Vt(e,o,s.options);s.options&ne&&s.content.length==0&&(l|=ne);let a=_.none;return n=n.filter(c=>(s.type?s.type.allowsMarkType(c.type):$t(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new U(e,t,a,r,null,l)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=ie)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),s=(l,a)=>{for(;l>=0;l--){let c=t[l];if(c==""){if(l==t.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let u=a>0||a==0&&r?this.nodes[a].type:n&&a>=o?n.node(a-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let n=this.parser.schema.nodes[t];if(n.isTextblock&&n.defaultAttrs)return n}}};function yi(i){for(let e=i.firstChild,t=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&sn.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):n=="li"?t=e:n&&(t=null)}}function _i(i,e){return(i.matches||i.msMatchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector).call(i,e)}function Jt(i){let e={};for(let t in i)e[t]=i[t];return e}function $t(i,e){let t=e.schema.nodes;for(let n in t){let r=t[n];if(!r.allowsMarkType(i))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(r.contentMatch))return!0}}var cn=65535,un=Math.pow(2,16);function vi(i,e){return i+e*un}function ln(i){return i&cn}function bi(i){return(i-(i&cn))/un}var pn=1,dn=2,_e=4,hn=8,se=class{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&hn)>0}get deletedBefore(){return(this.delInfo&(pn|_e))>0}get deletedAfter(){return(this.delInfo&(dn|_e))>0}get deletedAcross(){return(this.delInfo&_e)>0}},D=class i{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&i.empty)return i.empty}recover(e){let t=0,n=ln(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[n*3]+t+bi(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+o],u=this.ranges[l+s],p=a+c;if(e<=p){let h=c?e==a?-1:e==p?1:t:t,d=a+r+(h<0?0:u);if(n)return d;let m=e==(t<0?a:p)?null:vi(l/3,e-a),g=e==a?dn:e==p?pn:_e;return(t<0?e!=a:e!=p)&&(g|=hn),new se(d,g,m)}r+=u-c}return n?e+r:new se(e+r,0,null)}touches(e,t){let n=0,r=ln(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?n:0);if(a>e)break;let c=this.ranges[l+o],u=a+c;if(e<=u&&l==r*3)return!0;n+=this.ranges[l+s]-c}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let s=this.ranges[r],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),c=this.ranges[r+t],u=this.ranges[r+n];e(l,l+c,a,a+u),o+=u-c}}invert(){return new i(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?i.empty:new i(e<0?[0,-e,0]:[0,0,e])}};D.empty=new D([]);var ve=class i{constructor(e,t,n=0,r=e?e.length:0){this.mirror=t,this.from=n,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new i(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],r!=null&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),r!=null&&r>t?n-r-1:void 0)}}invert(){let e=new i;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}r|=l.delInfo,e=l.pos}return n?e:new se(e,r,null)}},Xe=Object.create(null),k=class{getMap(){return D.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Xe[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Xe)throw new RangeError("Duplicate use of step JSON ID "+e);return Xe[e]=t,t.prototype.jsonID=e,t}},C=class i{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new i(e,null)}static fail(e){return new i(null,e)}static fromReplace(e,t,n,r){try{return i.ok(e.replace(t,n,r))}catch(o){if(o instanceof J)return i.fail(o.message);throw o}}};function rt(i,e,t){let n=[];for(let r=0;r<i.childCount;r++){let o=i.child(r);o.content.size&&(o=o.copy(rt(o.content,e,o))),o.isInline&&(o=e(o,t,r)),n.push(o)}return f.fromArray(n)}var be=class i extends k{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new x(rt(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),r),t.openStart,t.openEnd);return C.fromReplace(e,this.from,this.to,o)}invert(){return new ke(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new i(t.pos,n.pos,this.mark)}merge(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new i(t.from,t.to,e.markFromJSON(t.mark))}};k.jsonID("addMark",be);var ke=class i extends k{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new x(rt(t.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),t.openStart,t.openEnd);return C.fromReplace(e,this.from,this.to,n)}invert(){return new be(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new i(t.pos,n.pos,this.mark)}merge(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new i(t.from,t.to,e.markFromJSON(t.mark))}};k.jsonID("removeMark",ke);var Ce=class i extends k{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return C.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return C.fromReplace(e,this.pos,this.pos+1,new x(f.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(n))return new i(this.pos,t.marks[r]);return new i(this.pos,this.mark)}}return new Me(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new i(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new i(t.pos,e.markFromJSON(t.mark))}};k.jsonID("addNodeMark",Ce);var Me=class i extends k{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return C.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return C.fromReplace(e,this.pos,this.pos+1,new x(f.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ce(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new i(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new i(t.pos,e.markFromJSON(t.mark))}};k.jsonID("removeNodeMark",Me);var P=class i extends k{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&et(e,this.from,this.to)?C.fail("Structure replace would overwrite content"):C.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new D([this.from,this.to-this.from,this.slice.size])}invert(e){return new i(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new i(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof i)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?x.empty:new x(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new i(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?x.empty:new x(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new i(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new i(t.from,t.to,x.fromJSON(e,t.slice),!!t.structure)}};k.jsonID("replace",P);var E=class i extends k{constructor(e,t,n,r,o,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(et(e,this.from,this.gapFrom)||et(e,this.gapTo,this.to)))return C.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return C.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?C.fromReplace(e,this.from,this.to,n):C.fail("Content does not fit in gap")}getMap(){return new D([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new i(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||o>n.pos?null:new i(t.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new i(t.from,t.to,t.gapFrom,t.gapTo,x.fromJSON(e,t.slice),t.insert,!!t.structure)}};k.jsonID("replaceAround",E);function et(i,e,t){let n=i.resolve(e),r=t-e,o=n.depth;for(;r>0&&o>0&&n.indexAfter(o)==n.node(o).childCount;)o--,r--;if(r>0){let s=n.node(o).maybeChild(n.indexAfter(o));for(;r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}}return!1}function ki(i,e,t){return(e==0||i.canReplace(e,i.childCount))&&(t==i.childCount||i.canReplace(0,t))}function j(i){let t=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let n=i.depth;;--n){let r=i.$from.node(n),o=i.$from.index(n),s=i.$to.indexAfter(n);if(n<i.depth&&r.canReplace(o,s,t))return n;if(n==0||r.type.spec.isolating||!ki(r,o,s))break}return null}function Se(i,e,t=null,n=i){let r=Ci(i,e),o=r&&Mi(n,e);return o?r.map(an).concat({type:e,attrs:t}).concat(o.map(an)):null}function an(i){return{type:i,attrs:null}}function Ci(i,e){let{parent:t,startIndex:n,endIndex:r}=i,o=t.contentMatchAt(n).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return t.canReplaceWith(n,r,s)?o:null}function Mi(i,e){let{parent:t,startIndex:n,endIndex:r}=i,o=t.child(n),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=n;a&&c<r;c++)a=a.matchType(t.child(c).type);return!a||!a.validEnd?null:s}function q(i,e,t=1,n){let r=i.resolve(e),o=r.depth-t,s=n&&n[n.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,u=t-2;c>o;c--,u--){let p=r.node(c),h=r.index(c);if(p.type.spec.isolating)return!1;let d=p.content.cutByIndex(h,p.childCount),m=n&&n[u+1];m&&(d=d.replaceChild(0,m.type.create(m.attrs)));let g=n&&n[u]||p;if(!p.canReplace(h+1,p.childCount)||!g.type.validContent(d))return!1}let l=r.indexAfter(o),a=n&&n[0];return r.node(o).canReplaceWith(l,l,a?a.type:r.node(o+1).type)}function ae(i,e){let t=i.resolve(e),n=t.index();return Ii(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}function Si(i,e){e.content.size||i.type.compatibleContent(e.type);let t=i.contentMatchAt(i.childCount),{linebreakReplacement:n}=i.type.schema;for(let r=0;r<e.childCount;r++){let o=e.child(r),s=o.type==n?i.type.schema.nodes.text:o.type;if(t=t.matchType(s),!t||!i.type.allowsMarks(o.marks))return!1}return t.validEnd}function Ii(i,e){return!!(i&&e&&!i.isLeaf&&Si(i,e))}function ot(i,e,t=e,n=x.empty){if(e==t&&!n.size)return null;let r=i.resolve(e),o=i.resolve(t);return Ei(r,o,n)?new P(e,t,n):new tt(r,o,n).fit()}function Ei(i,e,t){return!t.openStart&&!t.openEnd&&i.start()==e.start()&&i.parent.canReplace(i.index(),e.index(),t.content)}var tt=class{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=f.empty;for(let r=0;r<=e.depth;r++){let o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=f.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let o=this.placed,s=n.depth,l=r.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new x(o,s,l);return e>-1?new E(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new P(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(let t=1;t<=2;t++)for(let n=t==1?e:this.unplaced.openStart;n>=0;n--){let r,o=null;n?(o=Ye(this.unplaced.content,n-1).firstChild,r=o.content):r=this.unplaced.content;let s=r.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,p=null;if(t==1&&(s?c.matchType(s.type)||(p=c.fillBefore(f.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:l,parent:o,inject:p};if(t==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:l,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=Ye(e,t);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new x(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=Ye(e,t);if(r.childCount<=1&&t>0){let o=e.size-t<=t+r.size;this.unplaced=new x(re(e,t-1,1),t-1,o?t-1:n)}else this.unplaced=new x(re(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,l=n?n.content:s.content,a=s.openStart-e,c=0,u=[],{match:p,type:h}=this.frontier[t];if(r){for(let g=0;g<r.childCount;g++)u.push(r.child(g));p=p.matchFragment(r)}let d=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let g=l.child(c),y=p.matchType(g.type);if(!y)break;c++,(c>1||a==0||g.content.size)&&(p=y,u.push(fn(g.mark(h.allowedMarks(g.marks)),c==1?a:0,c==l.childCount?d:-1)))}let m=c==l.childCount;m||(d=-1),this.placed=oe(this.placed,t,f.from(u)),this.frontier[t].match=p,m&&d<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=l;g<d;g++){let b=y.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),y=b.content}this.unplaced=m?e==0?x.empty:new x(re(s.content,e-1,1),e-1,d<0?s.openEnd:e-1):new x(re(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ze(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Ze(e,t,r,n,o);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=Ze(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=oe(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=oe(this.placed,this.depth,f.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(f.empty,!0);t.childCount&&(this.placed=oe(this.placed,this.frontier.length,t))}};function re(i,e,t){return e==0?i.cutByIndex(t,i.childCount):i.replaceChild(0,i.firstChild.copy(re(i.firstChild.content,e-1,t)))}function oe(i,e,t){return e==0?i.append(t):i.replaceChild(i.childCount-1,i.lastChild.copy(oe(i.lastChild.content,e-1,t)))}function Ye(i,e){for(let t=0;t<e;t++)i=i.firstChild.content;return i}function fn(i,e,t){if(e<=0)return i;let n=i.content;return e>1&&(n=n.replaceChild(0,fn(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=i.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(i.type.contentMatch.matchFragment(n).fillBefore(f.empty,!0)))),i.copy(n)}function Ze(i,e,t,n,r){let o=i.node(e),s=r?i.indexAfter(e):i.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let l=n.fillBefore(o.content,!0,s);return l&&!Ti(t,o.content,s)?l:null}function Ti(i,e,t){for(let n=t;n<e.childCount;n++)if(!i.allowsMarks(e.child(n).marks))return!0;return!1}var nt=class i extends k{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return C.fail("No node at attribute step's position");let n=Object.create(null);for(let o in t.attrs)n[o]=t.attrs[o];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return C.fromReplace(e,this.pos,this.pos+1,new x(f.from(r),0,t.isLeaf?0:1))}getMap(){return D.empty}invert(e){return new i(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new i(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new i(t.pos,t.attr,t.value)}};k.jsonID("attr",nt);var it=class i extends k{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return C.ok(n)}getMap(){return D.empty}invert(e){return new i(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new i(t.attr,t.value)}};k.jsonID("docAttr",it);var le=class extends Error{};le=function i(e){let t=Error.call(this,e);return t.__proto__=i.prototype,t};le.prototype=Object.create(Error.prototype);le.prototype.constructor=le;le.prototype.name="TransformError";var st=Object.create(null),w=class{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Q(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=x.empty){let n=t.content.lastChild,r=null;for(let l=0;l<t.openEnd;l++)r=n,n=n.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],u=e.mapping.slice(o);e.replaceRange(u.map(a.pos),u.map(c.pos),l?x.empty:t),l==0&&xn(e,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:s,$to:l}=r[o],a=e.mapping.slice(n),c=a.map(s.pos),u=a.map(l.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),xn(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new I(e):K(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let o=e.depth-1;o>=0;o--){let s=t<0?K(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):K(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new N(e.node(0))}static atStart(e){return K(e,e,0,0,1)||new N(e)}static atEnd(e){return K(e,e,e.content.size,e.childCount,-1)||new N(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=st[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in st)throw new RangeError("Duplicate use of selection JSON ID "+e);return st[e]=t,t.prototype.jsonID=e,t}getBookmark(){return I.between(this.$anchor,this.$head).getBookmark()}};w.prototype.visible=!0;var Q=class{constructor(e,t){this.$from=e,this.$to=t}},mn=!1;function gn(i){!mn&&!i.parent.inlineContent&&(mn=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}var I=class i extends w{constructor(e,t=e){gn(e),gn(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return w.near(n);let r=e.resolve(t.map(this.anchor));return new i(r.parent.inlineContent?r:n,n)}replace(e,t=x.empty){if(super.replace(e,t),t==x.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof i&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ie(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new i(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if((!n||r)&&(n=r>=0?1:-1),!t.parent.inlineContent){let o=w.findFrom(t,n,!0)||w.findFrom(t,-n,!0);if(o)t=o.$head;else return w.near(t,n)}return e.parent.inlineContent||(r==0?e=t:(e=(w.findFrom(e,-n,!0)||w.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=r<0&&(e=t))),new i(e,t)}};w.jsonID("text",I);var Ie=class i{constructor(e,t){this.anchor=e,this.head=t}map(e){return new i(e.map(this.anchor),e.map(this.head))}resolve(e){return I.between(e.resolve(this.anchor),e.resolve(this.head))}},v=class i extends w{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),o=e.resolve(r);return n?w.near(o):new i(o)}content(){return new x(f.from(this.node),0,0)}eq(e){return e instanceof i&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new at(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new i(e.resolve(t.anchor))}static create(e,t){return new i(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};v.prototype.visible=!1;w.jsonID("node",v);var at=class i{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new Ie(n,n):new i(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&v.isSelectable(n)?new v(t):w.near(t)}},N=class i extends w{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=x.empty){if(t==x.empty){e.delete(0,e.doc.content.size);let n=w.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new i(e)}map(e){return new i(e)}eq(e){return e instanceof i}getBookmark(){return Ni}};w.jsonID("all",N);var Ni={map(){return this},resolve(i){return new N(i)}};function K(i,e,t,n,r,o=!1){if(e.inlineContent)return I.create(i,t);for(let s=n-(r>0?0:1);r>0?s<e.childCount:s>=0;s+=r){let l=e.child(s);if(l.isAtom){if(!o&&v.isSelectable(l))return v.create(i,t-(r<0?l.nodeSize:0))}else{let a=K(i,l,t+r,r<0?l.childCount:0,r,o);if(a)return a}t+=l.nodeSize*r}return null}function xn(i,e,t){let n=i.steps.length-1;if(n<e)return;let r=i.steps[n];if(!(r instanceof P||r instanceof E))return;let o=i.mapping.maps[n],s;o.forEach((l,a,c,u)=>{s==null&&(s=u)}),i.setSelection(w.near(i.doc.resolve(s),t))}function wn(i,e){return!e||!i?i:i.bind(e)}var G=class{constructor(e,t,n){this.name=e,this.init=wn(t.init,n),this.apply=wn(t.apply,n)}},Do=[new G("doc",{init(i){return i.doc||i.schema.topNodeType.createAndFill()},apply(i){return i.doc}}),new G("selection",{init(i,e){return i.selection||w.atStart(e.doc)},apply(i){return i.selection}}),new G("storedMarks",{init(i){return i.storedMarks||null},apply(i,e,t,n){return n.selection.$cursor?i.storedMarks:null}}),new G("scrollToSelection",{init(){return 0},apply(i,e){return i.scrolledIntoView?e+1:e}})];var lt=Object.create(null);function Oi(i){return i in lt?i+"$"+ ++lt[i]:(lt[i]=0,i+"$")}var X=class{constructor(e="key"){this.key=Oi(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};var Ai=["ol",0],Di=["ul",0],zi=["li",0],yn={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(i){return{order:i.hasAttribute("start")?+i.getAttribute("start"):1}}}],toDOM(i){return i.attrs.order==1?Ai:["ol",{start:i.attrs.order},0]}},_n={parseDOM:[{tag:"ul"}],toDOM(){return Di}},vn={parseDOM:[{tag:"li"}],toDOM(){return zi},defining:!0};function bn(i,e=null){return function(t,n){let{$from:r,$to:o}=t.selection,s=r.blockRange(o);if(!s)return!1;let l=n?t.tr:null;return Ri(l,s,i,e)?(n&&n(l.scrollIntoView()),!0):!1}}function Ri(i,e,t,n=null){let r=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new $(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new $(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),r=!0}let l=Se(o,t,n,e);return l?(i&&Pi(i,e,l,r,t),!0):!1}function Pi(i,e,t,n,r){let o=f.empty;for(let u=t.length-1;u>=0;u--)o=f.from(t[u].type.create(t[u].attrs,o));i.step(new E(e.start-(n?2:0),e.end,e.start,e.end,new x(o,0,0),t.length,!0));let s=0;for(let u=0;u<t.length;u++)t[u].type==r&&(s=u+1);let l=t.length-s,a=e.start+t.length-(n?2:0),c=e.parent;for(let u=e.startIndex,p=e.endIndex,h=!0;u<p;u++,h=!1)!h&&q(i.doc,a,l)&&(i.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return i}function kn(i){return function(e,t){let{$from:n,$to:r}=e.selection,o=n.blockRange(r,s=>s.childCount>0&&s.firstChild.type==i);return o?t?n.node(o.depth-1).type==i?Li(e,t,i,o):Bi(e,t,o):!0:!1}}function Li(i,e,t,n){let r=i.tr,o=n.end,s=n.$to.end(n.depth);o<s&&(r.step(new E(o-1,s,o,s,new x(f.from(t.create(null,n.parent.copy())),1,0),1,!0)),n=new $(r.doc.resolve(n.$from.pos),r.doc.resolve(s),n.depth));let l=j(n);if(l==null)return!1;r.lift(n,l);let a=r.doc.resolve(r.mapping.map(o,-1)-1);return ae(r.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&r.join(a.pos),e(r.scrollIntoView()),!0}function Bi(i,e,t){let n=i.tr,r=t.parent;for(let d=t.end,m=t.endIndex-1,g=t.startIndex;m>g;m--)d-=r.child(m).nodeSize,n.delete(d-1,d+1);let o=n.doc.resolve(t.start),s=o.nodeAfter;if(n.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,a=t.endIndex==r.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(l?0:1),u+1,s.content.append(a?f.empty:f.from(r))))return!1;let p=o.pos,h=p+s.nodeSize;return n.step(new E(p-(l?1:0),h+(a?1:0),p+1,h-1,new x((l?f.empty:f.from(r.copy(f.empty))).append(a?f.empty:f.from(r.copy(f.empty))),l?0:1,a?0:1),l?0:1)),e(n.scrollIntoView()),!0}var Hi={attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(i){return{href:i.getAttribute("href"),title:i.getAttribute("title"),target:i.getAttribute("target")}}}],toDOM(i){let{href:e,title:t,target:n}=i.attrs;return["a",{href:e,title:t,target:n},0]}},Vi={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM(){return["em",0]}},Ji={parseDOM:[{tag:"strong"},{tag:"b",getAttrs:i=>i.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:i=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(i)&&null}],toDOM(){return["strong",0]}},$i={parseDOM:[{tag:"code"}],toDOM(){return["code",0]}},Wi={parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM(){return["u",0]}},ji={parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM(){return["s",0]}},qi={attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:i=>({color:i})}],toDOM(i){let{color:e}=i.attrs;return["span",{style:`color:${e};`},0]}},Ui={attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:i=>({backgroundColor:i})}],toDOM(i){let{backgroundColor:e}=i.attrs;return["span",{style:`background-color:${e};`},0]}},Ki={attrs:{},parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM(){return["sup",0]}},Gi={attrs:{},parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM(){return["sub",0]}},Qi={link:Hi,em:Vi,strong:Ji,code:$i,u:Wi,s:ji,text_color:qi,text_background_color:Ui,sup:Ki,sub:Gi},Xi={content:"block+"},Yi={group:"inline"},Zi={content:"inline*",group:"block",attrs:{align:{default:null},indent:{default:null}},parseDOM:[{tag:"p",getAttrs(i){let{textAlign:e}=i.style,t=i.getAttribute("align")||e||null,n=i.getAttribute("data-indent")||null;return{align:t,indent:parseInt(n,10)||null}}}],toDOM(i){let{align:e,indent:t}=i.attrs,n={textAlign:e!=="left"?e:null,marginLeft:t!==null?`${t*40}px`:null};return["p",{style:ue(n)||null,"data-indent":t??null},0]}},er={content:"block+",group:"block",defining:!0,attrs:{indent:{default:null}},parseDOM:[{tag:"blockquote",getAttrs(i){let e=i.getAttribute("data-indent")||null;return{indent:parseInt(e,10)||null}}}],toDOM(i){let{indent:e}=i.attrs,t={marginLeft:e!==null?`${e*40}px`:null};return["blockquote",{style:ue(t)||null,"data-indent":e??null},0]}},tr={group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["hr"]}},nr={attrs:{level:{default:1},align:{default:null},indent:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(i){let{textAlign:e}=i.style,t=i.getAttribute("align")||e||null,n=i.getAttribute("data-indent")||null;return{level:1,align:t,indent:parseInt(n,10)||null}}},{tag:"h2",getAttrs(i){let{textAlign:e}=i.style,t=i.getAttribute("align")||e||null,n=i.getAttribute("data-indent")||null;return{level:2,align:t,indent:parseInt(n,10)||null}}},{tag:"h3",getAttrs(i){let{textAlign:e}=i.style,t=i.getAttribute("align")||e||null,n=i.getAttribute("data-indent")||null;return{level:3,align:t,indent:parseInt(n,10)||null}}},{tag:"h4",getAttrs(i){let{textAlign:e}=i.style,t=i.getAttribute("align")||e||null,n=i.getAttribute("data-indent")||null;return{level:4,align:t,indent:parseInt(n,10)||null}}},{tag:"h5",getAttrs(i){let{textAlign:e}=i.style,t=i.getAttribute("align")||e||null,n=i.getAttribute("data-indent")||null;return{level:5,align:t,indent:parseInt(n,10)||null}}},{tag:"h6",getAttrs(i){let{textAlign:e}=i.style,t=i.getAttribute("align")||e||null,n=i.getAttribute("data-indent")||null;return{level:6,align:t,indent:parseInt(n,10)||null}}}],toDOM(i){let{level:e,align:t,indent:n}=i.attrs,r={textAlign:t!=="left"?t:null,marginLeft:n!==null?`${n*40}px`:null},s={style:ue(r)||null,"data-indent":n??null};return[`h${e}`,s,0]}},ir={content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return["pre",["code",0]]}},rr={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}},or={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(i){return{src:i.getAttribute("src"),title:i.getAttribute("title"),alt:i.getAttribute("alt"),width:i.getAttribute("width")}}}],toDOM(i){let{src:e,alt:t,title:n,width:r}=i.attrs;return["img",{src:e,alt:t,title:n,width:r}]}},sr=R(T({},vn),{content:"paragraph block*"}),lr=R(T({},yn),{content:"list_item+",group:"block"}),ar=R(T({},_n),{content:"list_item+",group:"block"}),cr={doc:Xi,text:Yi,paragraph:Zi,blockquote:er,horizontal_rule:tr,heading:nr,hard_break:rr,code_block:ir,image:or,list_item:sr,ordered_list:lr,bullet_list:ar},ce=new xe({marks:Qi,nodes:cr});var Mn=(i,e)=>i.selection.empty?!1:(e&&e(i.tr.deleteSelection().scrollIntoView()),!0);function ur(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("backward",i):t.parentOffset>0)?null:t}var pr=(i,e,t)=>{let n=ur(i,t);if(!n)return!1;let r=Sn(n);if(!r){let s=n.blockRange(),l=s&&j(s);return l==null?!1:(e&&e(i.tr.lift(s,l).scrollIntoView()),!0)}let o=r.nodeBefore;if(zn(i,r,e,-1))return!0;if(n.parent.content.size==0&&(Y(o,"end")||v.isSelectable(o)))for(let s=n.depth;;s--){let l=ot(i.doc,n.before(s),n.after(s),x.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=i.tr.step(l);a.setSelection(Y(o,"end")?w.findFrom(a.doc.resolve(a.mapping.map(r.pos,-1)),-1):v.create(a.doc,r.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||n.node(s-1).childCount>1)break}return o.isAtom&&r.depth==n.depth-1?(e&&e(i.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!1};function Y(i,e,t=!1){for(let n=i;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}var dr=(i,e,t)=>{let{$head:n,empty:r}=i.selection,o=n;if(!r)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("backward",i):n.parentOffset>0)return!1;o=Sn(n)}let s=o&&o.nodeBefore;return!s||!v.isSelectable(s)?!1:(e&&e(i.tr.setSelection(v.create(i.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Sn(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){if(i.index(e)>0)return i.doc.resolve(i.before(e+1));if(i.node(e).type.spec.isolating)break}return null}function hr(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("forward",i):t.parentOffset<t.parent.content.size)?null:t}var fr=(i,e,t)=>{let n=hr(i,t);if(!n)return!1;let r=In(n);if(!r)return!1;let o=r.nodeAfter;if(zn(i,r,e,1))return!0;if(n.parent.content.size==0&&(Y(o,"start")||v.isSelectable(o))){let s=ot(i.doc,n.before(),n.after(),x.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=i.tr.step(s);l.setSelection(Y(o,"start")?w.findFrom(l.doc.resolve(l.mapping.map(r.pos)),1):v.create(l.doc,l.mapping.map(r.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&r.depth==n.depth-1?(e&&e(i.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0):!1},mr=(i,e,t)=>{let{$head:n,empty:r}=i.selection,o=n;if(!r)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("forward",i):n.parentOffset<n.parent.content.size)return!1;o=In(n)}let s=o&&o.nodeAfter;return!s||!v.isSelectable(s)?!1:(e&&e(i.tr.setSelection(v.create(i.doc,o.pos)).scrollIntoView()),!0)};function In(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){let t=i.node(e);if(i.index(e)+1<t.childCount)return i.doc.resolve(i.after(e+1));if(t.type.spec.isolating)break}return null}var En=(i,e)=>{let{$from:t,$to:n}=i.selection,r=t.blockRange(n),o=r&&j(r);return o==null?!1:(e&&e(i.tr.lift(r,o).scrollIntoView()),!0)},Tn=(i,e)=>{let{$head:t,$anchor:n}=i.selection;return!t.parent.type.spec.code||!t.sameParent(n)?!1:(e&&e(i.tr.insertText(`
`).scrollIntoView()),!0)};function ut(i){for(let e=0;e<i.edgeCount;e++){let{type:t}=i.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}var Nn=(i,e)=>{let{$head:t,$anchor:n}=i.selection;if(!t.parent.type.spec.code||!t.sameParent(n))return!1;let r=t.node(-1),o=t.indexAfter(-1),s=ut(r.contentMatchAt(o));if(!s||!r.canReplaceWith(o,o,s))return!1;if(e){let l=t.after(),a=i.tr.replaceWith(l,l,s.createAndFill());a.setSelection(w.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},On=(i,e)=>{let t=i.selection,{$from:n,$to:r}=t;if(t instanceof N||n.parent.inlineContent||r.parent.inlineContent)return!1;let o=ut(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!n.parentOffset&&r.index()<r.parent.childCount?n:r).pos,l=i.tr.insert(s,o.createAndFill());l.setSelection(I.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},An=(i,e)=>{let{$cursor:t}=i.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(q(i.doc,o))return e&&e(i.tr.split(o).scrollIntoView()),!0}let n=t.blockRange(),r=n&&j(n);return r==null?!1:(e&&e(i.tr.lift(n,r).scrollIntoView()),!0)};function gr(i){return(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof v&&e.selection.node.isBlock)return!n.parentOffset||!q(e.doc,n.pos)?!1:(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let o=[],s,l,a=!1,c=!1;for(let d=n.depth;;d--)if(n.node(d).isBlock){a=n.end(d)==n.pos+(n.depth-d),c=n.start(d)==n.pos-(n.depth-d),l=ut(n.node(d-1).contentMatchAt(n.indexAfter(d-1)));let g=i&&i(r.parent,a,n);o.unshift(g||(a&&l?{type:l}:null)),s=d;break}else{if(d==1)return!1;o.unshift(null)}let u=e.tr;(e.selection instanceof I||e.selection instanceof N)&&u.deleteSelection();let p=u.mapping.map(n.pos),h=q(u.doc,p,o.length,o);if(h||(o[0]=l?{type:l}:null,h=q(u.doc,p,o.length,o)),!h)return!1;if(u.split(p,o.length,o),!a&&c&&n.node(s).type!=l){let d=u.mapping.map(n.before(s)),m=u.doc.resolve(d);l&&n.node(s-1).canReplaceWith(m.index(),m.index()+1,l)&&u.setNodeMarkup(u.mapping.map(n.before(s)),l)}return t&&t(u.scrollIntoView()),!0}}var Dn=gr();var xr=(i,e)=>(e&&e(i.tr.setSelection(new N(i.doc))),!0);function wr(i,e,t){let n=e.nodeBefore,r=e.nodeAfter,o=e.index();return!n||!r||!n.type.compatibleContent(r.type)?!1:!n.content.size&&e.parent.canReplace(o-1,o)?(t&&t(i.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(r.isTextblock||ae(i.doc,e.pos))?!1:(t&&t(i.tr.join(e.pos).scrollIntoView()),!0)}function zn(i,e,t,n){let r=e.nodeBefore,o=e.nodeAfter,s,l,a=r.type.spec.isolating||o.type.spec.isolating;if(!a&&wr(i,e,t))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(t){let d=e.pos+o.nodeSize,m=f.empty;for(let b=s.length-1;b>=0;b--)m=f.from(s[b].create(null,m));m=f.from(r.copy(m));let g=i.tr.step(new E(e.pos-1,d,e.pos,d,new x(m,1,0),s.length,!0)),y=g.doc.resolve(d+2*s.length);y.nodeAfter&&y.nodeAfter.type==r.type&&ae(g.doc,y.pos)&&g.join(y.pos),t(g.scrollIntoView())}return!0}let u=o.type.spec.isolating||n>0&&a?null:w.findFrom(e,1),p=u&&u.$from.blockRange(u.$to),h=p&&j(p);if(h!=null&&h>=e.depth)return t&&t(i.tr.lift(p,h).scrollIntoView()),!0;if(c&&Y(o,"start",!0)&&Y(r,"end")){let d=r,m=[];for(;m.push(d),!d.isTextblock;)d=d.lastChild;let g=o,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(d.canReplace(d.childCount,d.childCount,g.content)){if(t){let b=f.empty;for(let F=m.length-1;F>=0;F--)b=f.from(m[F].copy(b));let ee=i.tr.step(new E(e.pos-m.length,e.pos+o.nodeSize,e.pos+y,e.pos+o.nodeSize-y,new x(b,m.length,0),0,!0));t(ee.scrollIntoView())}return!0}}return!1}function Rn(i){return function(e,t){let n=e.selection,r=i<0?n.$from:n.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return r.node(o).isTextblock?(t&&t(e.tr.setSelection(I.create(e.doc,i<0?r.start(o):r.end(o)))),!0):!1}}var yr=Rn(-1),_r=Rn(1);function Pn(i,e=null){return function(t,n){let{$from:r,$to:o}=t.selection,s=r.blockRange(o),l=s&&Se(s,i,e);return l?(n&&n(t.tr.wrap(s,l).scrollIntoView()),!0):!1}}function Ee(i,e=null){return function(t,n){let r=!1;for(let o=0;o<t.selection.ranges.length&&!r;o++){let{$from:{pos:s},$to:{pos:l}}=t.selection.ranges[o];t.doc.nodesBetween(s,l,(a,c)=>{if(r)return!1;if(!(!a.isTextblock||a.hasMarkup(i,e)))if(a.type==i)r=!0;else{let u=t.doc.resolve(c),p=u.index();r=u.parent.canReplaceWith(p,p+1,i)}})}if(!r)return!1;if(n){let o=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=t.selection.ranges[s];o.setBlockType(l,a,i,e)}n(o.scrollIntoView())}return!0}}function vr(i,e,t,n){for(let r=0;r<e.length;r++){let{$from:o,$to:s}=e[r],l=o.depth==0?i.inlineContent&&i.type.allowsMarkType(t):!1;if(i.nodesBetween(o.pos,s.pos,(a,c)=>{if(l||!n&&a.isAtom&&a.isInline&&c>=o.pos&&c+a.nodeSize<=s.pos)return!1;l=a.inlineContent&&a.type.allowsMarkType(t)}),l)return!0}return!1}function br(i){let e=[];for(let t=0;t<i.length;t++){let{$from:n,$to:r}=i[t];n.doc.nodesBetween(n.pos,r.pos,(o,s)=>{if(o.isAtom&&o.content.size&&o.isInline&&s>=n.pos&&s+o.nodeSize<=r.pos)return s+1>n.pos&&e.push(new Q(n,n.doc.resolve(s+1))),n=n.doc.resolve(s+1+o.content.size),!1}),n.pos<r.pos&&e.push(new Q(n,r))}return e}function pt(i,e=null,t){let n=(t&&t.removeWhenPresent)!==!1,r=(t&&t.enterInlineAtoms)!==!1,o=!(t&&t.includeWhitespace);return function(s,l){let{empty:a,$cursor:c,ranges:u}=s.selection;if(a&&!c||!vr(s.doc,u,i,r))return!1;if(l)if(c)i.isInSet(s.storedMarks||c.marks())?l(s.tr.removeStoredMark(i)):l(s.tr.addStoredMark(i.create(e)));else{let p,h=s.tr;r||(u=br(u)),n?p=!u.some(d=>s.doc.rangeHasMark(d.$from.pos,d.$to.pos,i)):p=!u.every(d=>{let m=!1;return h.doc.nodesBetween(d.$from.pos,d.$to.pos,(g,y,b)=>{if(m)return!1;m=!i.isInSet(g.marks)&&!!b&&b.type.allowsMarkType(i)&&!(g.isText&&/^\s*$/.test(g.textBetween(Math.max(0,d.$from.pos-y),Math.min(g.nodeSize,d.$to.pos-y))))}),!m});for(let d=0;d<u.length;d++){let{$from:m,$to:g}=u[d];if(!p)h.removeMark(m.pos,g.pos,i);else{let y=m.pos,b=g.pos,ee=m.nodeAfter,F=g.nodeBefore,Et=o&&ee&&ee.isText?/^\s*/.exec(ee.text)[0].length:0,ei=o&&F&&F.isText?/\s*$/.exec(F.text)[0].length:0;y+Et<b&&(y+=Et,b-=ei),h.addMark(y,b,i.create(e))}}l(h.scrollIntoView())}return!0}}function Te(...i){return function(e,t,n){for(let r=0;r<i.length;r++)if(i[r](e,t,n))return!0;return!1}}var ct=Te(Mn,pr,dr),Cn=Te(Mn,fr,mr),L={Enter:Te(Tn,On,An,Dn),"Mod-Enter":Nn,Backspace:ct,"Mod-Backspace":ct,"Shift-Backspace":ct,Delete:Cn,"Mod-Delete":Cn,"Mod-a":xr},kr={"Ctrl-h":L.Backspace,"Alt-Backspace":L["Mod-Backspace"],"Ctrl-d":L.Delete,"Ctrl-Alt-Backspace":L["Mod-Delete"],"Alt-Delete":L["Mod-Delete"],"Alt-d":L["Mod-Delete"],"Ctrl-a":yr,"Ctrl-e":_r};for(let i in L)kr[i]=L[i];var jo=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1;var Ne=(i,e)=>{let{from:t,$from:n,to:r,empty:o}=i.selection;return o?!!e.isInSet(i.storedMarks||n.marks()):i.doc.rangeHasMark(t,r,e)},Cr=(i,e)=>{for(let t=e.depth;t>0;t-=1)if(e.node(t).type===i)return e.node(t).type;return null},dt=(i,e,t={})=>{let{selection:n}=i,{$from:r,to:o}=n,s=Cr(e,r);return!Object.entries(t).length||!s?!!s:o<=r.end()&&r.parent.hasMarkup(e,t)},Ln=i=>{let e=[],{selection:t,storedMarks:n}=i,{from:r,to:o,empty:s,$from:l}=t;return s?e=n||l.marks():i.doc.nodesBetween(r,o,a=>{e=[...e,...a.marks]}),e},ht=i=>{let e=[],{selection:{from:t,to:n}}=i;return i.doc.nodesBetween(t,n,r=>{e.push(r)}),e},ft=(i,e,t)=>{for(let n of e){let{$from:r,$to:o}=n,s=r.depth===0?i.type.allowsMarkType(t):!1;if(i.nodesBetween(r.pos,o.pos,l=>s?!1:(s=l.inlineContent&&l.type.allowsMarkType(t),!0)),s)return!0}return!1};var Bn=(i,e)=>{let{$from:t}=i.selection;for(let n=t.depth;n>=0;n-=1){let r=t.index(n);if(t.node(n).canReplaceWith(r,r,e))return!0}return!1};var Fn=()=>(i,e)=>{let{doc:t,selection:n,tr:r,schema:o}=i,{$head:{pos:s},from:l,to:a}=n,c=o.marks.link;if(l===a){let u=t.resolve(s),p=s-u.textOffset,h=p+u.parent.child(u.index()).nodeSize;r.removeMark(p,h,c)}else r.removeMark(l,a,c);return r.docChanged?(e?.(r),!0):!1},mt=(i,e={})=>(t,n)=>{let{tr:r,selection:o}=t,{empty:s,ranges:l,$from:a,$to:c}=o;if(s&&o instanceof I){let{$cursor:u}=o;if(!u||!ft(t.doc,l,i)||(r.addStoredMark(i.create(e)),!r.storedMarksSet))return!1;n?.(r)}else{if(r.addMark(a.pos,c.pos,i.create(e)),!r.docChanged)return!1;n?.(r.scrollIntoView())}return!0},Hn=i=>(e,t)=>{let{tr:n,selection:r,storedMarks:o,doc:s}=e,{empty:l,ranges:a}=r;if(l&&r instanceof I){let{$cursor:c}=r;if(!c||!ft(e.doc,a,i))return!1;if(i.isInSet(o||c.marks()))return n.removeStoredMark(i),t?.(n),!0}else{for(let c of a){let{$from:u,$to:p}=c;s.rangeHasMark(u.pos,p.pos,i)&&n.removeMark(u.pos,p.pos,i)}if(!n.docChanged)return!1;t?.(n.scrollIntoView())}return!1};var Oe=200,M=function(){};M.prototype.append=function(e){return e.length?(e=M.from(e),!this.length&&e||e.length<Oe&&this.leafAppend(e)||this.length<Oe&&e.leafPrepend(this)||this.appendInner(e)):this};M.prototype.prepend=function(e){return e.length?M.from(e).append(this):this};M.prototype.appendInner=function(e){return new Mr(this,e)};M.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?M.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};M.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};M.prototype.forEach=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)};M.prototype.map=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var r=[];return this.forEach(function(o,s){return r.push(e(o,s))},t,n),r};M.from=function(e){return e instanceof M?e:e&&e.length?new Vn(e):M.empty};var Vn=function(i){function e(n){i.call(this),this.values=n}i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new e(this.values.slice(r,o))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,o,s,l){for(var a=o;a<s;a++)if(r(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,l){for(var a=o-1;a>=s;a--)if(r(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=Oe)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=Oe)return new e(r.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(M);M.empty=new Vn([]);var Mr=function(i){function e(t,n){i.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,r,o,s){var l=this.left.length;if(r<l&&this.left.forEachInner(n,r,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(n,Math.max(r-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(n,r,o,s){var l=this.left.length;if(r>l&&this.right.forEachInvertedInner(n,r-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(n,Math.min(r,l),o,s)===!1)return!1},e.prototype.sliceInner=function(n,r){if(n==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(n,r):n>=o?this.right.slice(n-o,r-o):this.left.slice(n,o).append(this.right.slice(0,r-o))},e.prototype.leafAppend=function(n){var r=this.right.leafAppend(n);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(n){var r=this.left.leafPrepend(n);if(r)return new e(r,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(M),gt=M;var Ir=500,Ae=class i{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let r,o;t&&(r=this.remapping(n,this.items.length),o=r.maps.length);let s=e.tr,l,a,c=[],u=[];return this.items.forEach((p,h)=>{if(!p.step){r||(r=this.remapping(n,h+1),o=r.maps.length),o--,u.push(p);return}if(r){u.push(new O(p.map));let d=p.step.map(r.slice(o)),m;d&&s.maybeStep(d).doc&&(m=s.mapping.maps[s.mapping.maps.length-1],c.push(new O(m,void 0,void 0,c.length+u.length))),o--,m&&r.appendMap(m,o)}else s.maybeStep(p.step);if(p.selection)return l=r?p.selection.map(r.slice(o)):p.selection,a=new i(this.items.slice(0,n).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,t,n,r){let o=[],s=this.eventCount,l=this.items,a=!r&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let p=e.steps[u].invert(e.docs[u]),h=new O(e.mapping.maps[u],p,t),d;(d=a&&a.merge(h))&&(h=d,u?o.pop():l=l.slice(0,l.length-1)),o.push(h),t&&(s++,t=void 0),r||(a=h)}let c=s-n.depth;return c>Tr&&(l=Er(l,c),s-=c),new i(l.append(o),s)}remapping(e,t){let n=new ve;return this.items.forEach((r,o)=>{let s=r.mirrorOffset!=null&&o-r.mirrorOffset>=e?n.maps.length-r.mirrorOffset:void 0;n.appendMap(r.map,s)},e,t),n}addMaps(e){return this.eventCount==0?this:new i(this.items.append(e.map(t=>new O(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(h=>{h.selection&&l--},r);let a=t;this.items.forEach(h=>{let d=o.getMirror(--a);if(d==null)return;s=Math.min(s,d);let m=o.maps[d];if(h.step){let g=e.steps[d].invert(e.docs[d]),y=h.selection&&h.selection.map(o.slice(a+1,d));y&&l++,n.push(new O(m,g,y))}else n.push(new O(m))},r);let c=[];for(let h=t;h<s;h++)c.push(new O(o.maps[h]));let u=this.items.slice(0,r).append(c).append(n),p=new i(u,l);return p.emptyItemCount()>Ir&&(p=p.compress(this.items.length-n.length)),p}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)r.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(t.slice(n)),c=a&&a.getMap();if(n--,c&&t.appendMap(c,n),a){let u=s.selection&&s.selection.map(t.slice(n));u&&o++;let p=new O(c.invert(),a,u),h,d=r.length-1;(h=r.length&&r[d].merge(p))?r[d]=h:r.push(p)}}else s.map&&n--},this.items.length,0),new i(gt.from(r.reverse()),o)}};Ae.empty=new Ae(gt.empty,0);function Er(i,e){let t;return i.forEach((n,r)=>{if(n.selection&&e--==0)return t=r,!1}),i.slice(t)}var O=class i{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new i(t.getMap().invert(),t,this.selection)}}},wt=class{constructor(e,t,n,r,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=o}},Tr=20;function Nr(i,e,t){let n=Or(e),r=yt.get(e).spec.config,o=(t?i.undone:i.done).popEvent(e,n);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(t?i.done:i.undone).addTransform(o.transform,e.selection.getBookmark(),r,n),a=new wt(t?l:o.remaining,t?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(yt,{redo:t,historyState:a})}var xt=!1,Jn=null;function Or(i){let e=i.plugins;if(Jn!=e){xt=!1,Jn=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){xt=!0;break}}return xt}var yt=new X("history"),ts=new X("closeHistory");function De(i,e){return(t,n)=>{let r=yt.getState(t);if(!r||(i?r.undone:r.done).eventCount==0)return!1;if(n){let o=Nr(r,t,i);o&&n(e?o.scrollIntoView():o)}return!0}}var $n=De(!1,!0),Wn=De(!0,!0),ns=De(!1,!1),is=De(!0,!1);var Ar=i=>typeof i=="string",Dr=()=>window.trustedTypes,Xn=i=>Dr()?.isHTML(i)??!1,zr=i=>Ar(i)||Xn(i),Rr={type:"doc",content:[{type:"paragraph"}]};var Pr=(i,e,t)=>{let n=e??ce,r=document.createElement("div");return r.innerHTML=i,we.fromSchema(n).parse(r,t).toJSON()},_t=(i,e,t)=>{if(!i)return e.nodeFromJSON(Rr);if(!zr(i))return e.nodeFromJSON(i);let n=Pr(i,e,t);return e.nodeFromJSON(n)};var z=class{constructor(e){this.name=e}apply(){return(e,t)=>{let{schema:n}=e,r=n.marks[this.name];return r?mt(r)(e,t):!1}}toggle(){return(e,t)=>{let{schema:n}=e,r=n.marks[this.name];return r?pt(r)(e,t):!1}}isActive(e){let{schema:t}=e,n=t.marks[this.name];return n?Ne(e,n):!1}canExecute(e){return this.toggle()(e)}},vt=class{toggle(){return(e,t)=>{let{schema:n}=e,r=n.nodes.blockquote;return r?this.isActive(e)?En(e,t):Pn(r)(e,t):!1}}isActive(e){let{schema:t}=e,n=t.nodes.blockquote;return n?dt(e,n):!1}canExecute(e){return this.toggle()(e)}},bt=class{insert(){return(e,t)=>{let{schema:n,tr:r}=e,o=n.nodes.horizontal_rule;return o?(t(r.replaceSelectionWith(o.create()).scrollIntoView()),!0):!1}}canExecute(e){return Bn(e,e.schema.nodes.horizontal_rule)}},Re=class{constructor(e=!1){this.isBulletList=!1,this.isBulletList=e}getType(e){return this.isBulletList?e.nodes.bullet_list:e.nodes.ordered_list}toggle(){return(e,t)=>{let{schema:n}=e,r=this.getType(n);return r?this.isActive(e)?kn(n.nodes.list_item)(e,t):bn(r)(e,t):!1}}isActive(e){let{schema:t}=e,n=this.getType(t);return n?dt(e,n):!1}canExecute(e){return this.toggle()(e)}},B=class{constructor(e){this.level=e}apply(){return(e,t)=>{let{schema:n}=e,r=n.nodes.heading;return r?Ee(r)(e,t):!1}}toggle(){return(e,t)=>{let{schema:n,selection:r,doc:o}=e,s=n.nodes.heading;if(!s)return!1;let l=r.$from.before(1),c=o.nodeAt(l)?.attrs??{};return this.isActive(e)?Ee(n.nodes.paragraph,c)(e,t):Ee(s,R(T({},c),{level:this.level}))(e,t)}}isActive(e){let{schema:t}=e,n=ht(e),r=t.nodes.heading;if(!r)return!1;let o=[r,t.nodes.text,t.nodes.blockquote];return!!n.filter(a=>o.includes(a.type)).find(a=>a.attrs.level===this.level)}canExecute(e){return this.toggle()(e)}},Z=class{constructor(e){this.align=e}toggle(){return(e,t)=>{let{doc:n,selection:r,tr:o,schema:s}=e,{from:l,to:a}=r,c=!1;return n.nodesBetween(l,a,(u,p)=>{let h=u.type;if([s.nodes.paragraph,s.nodes.heading].includes(h)){c=!0;let d=u.attrs.align===this.align?null:this.align;o.setNodeMarkup(p,h,R(T({},u.attrs),{align:d}))}return!0}),c?(o.docChanged&&t?.(o),!0):!1}}isActive(e){return!!ht(e).find(r=>r.attrs.align===this.align)}canExecute(e){return this.toggle()(e)}},Lr={strict:!0},Br=class{update(e){return(t,n)=>{let{schema:r,selection:o}=t,s=r.marks.link;return!s||o.empty?!1:pt(s,e)(t,n)}}insert(e,t){return(n,r)=>{let{schema:o,tr:s}=n;if(!o.marks.link)return!1;let a={href:t.href,title:t.title??e,target:t.target??"_blank"},c=o.text(e,[o.marks.link.create(a)]);return s.replaceSelectionWith(c,!1).scrollIntoView(),s.docChanged?(r?.(s),!0):!1}}isActive(e,t=Lr){if(t.strict)return!0;let{schema:n}=e,r=n.marks.link;return r?Ne(e,r):!1}remove(e,t){return Fn()(e,t)}canExecute(e){let t={href:""};return this.insert("Exec",t)(e)||this.update(t)(e)}},Fr=class{insert(e,t){return(n,r)=>{let{schema:o,tr:s,selection:l}=n,a=o.nodes.image;if(!a)return!1;let c=T({width:null,src:e},t);!c.width&&l instanceof v&&l.node.type===a&&(c.width=l.node.attrs.width),s.replaceSelectionWith(a.createAndFill(c));let u=s.doc.resolve(s.selection.anchor-s.selection.$anchor.nodeBefore.nodeSize);return s.setSelection(new v(u)).scrollIntoView(),s.docChanged?(r?.(s),!0):!1}}isActive(e){let{selection:t}=e;return t instanceof v?t.node.type.name==="image":!1}},Yn=class{constructor(e,t="color"){this.name=e,this.attrName=t}apply(e){return(t,n)=>{let{schema:r,selection:o,doc:s}=t,l=r.marks[this.name];if(!l)return!1;let{from:a,to:c,empty:u}=o;if(!u&&a+1===c){let p=s.nodeAt(a);if(p?.isAtom&&!p.isText&&p.isLeaf)return!1}return mt(l,e)(t,n)}}isActive(e){let{schema:t}=e,n=t.marks[this.name];return n?Ne(e,n):!1}getActiveColors(e){if(!this.isActive(e))return[];let{schema:t}=e;return Ln(e).filter(o=>o.type===t.marks[this.name]).map(o=>o.attrs[this.attrName]).filter(Boolean)}remove(){return(e,t)=>{let{schema:n}=e,r=n.marks[this.name];return r?Hn(r)(e,t):!1}}canExecute(e){let t=this.name==="text_color"?{color:""}:{backgroundColor:""};return this.apply(t)(e)}},Hr=["link"],kt=class{insert(){return(e,t)=>{let{tr:n}=e,{ranges:r,empty:o}=n.selection;return o||(Object.entries(e.schema.marks).forEach(([s,l])=>{Hr.includes(s)||r.forEach(a=>{n.removeMark(a.$from.pos,a.$to.pos,l)})}),t(n)),!0}}canExecute(){return!0}},Vr=["paragraph","heading","blockquote"],jn=0,qn=10,Jr=(i,e,t)=>{let n=i.doc.nodeAt(e);if(!n)return!1;let r=n.attrs.indent??0,o=Pt(r+(t==="increase"?1:-1),jn,qn);if(o===r||o<jn||o>qn)return!1;let s=R(T({},n.attrs),{indent:o});return i.setNodeMarkup(e,n.type,s),!0},Pe=class{constructor(e){this.method="increase",this.method=e}insert(){return(e,t)=>{let{tr:n,doc:r}=e,{from:o,to:s}=n.selection,l=!1;return r.nodesBetween(o,s,(a,c)=>{let u=a.type;return Vr.includes(u.name)?(l=Jr(n,c,this.method),!1):!a.type.name.includes("list")}),l?(n.docChanged&&t?.(n),!0):!1}}canExecute(e){return this.insert()(e)}},Le=class{constructor(e){this.mode="undo",this.mode=e}insert(){return(e,t)=>this.mode==="undo"?$n(e,t):Wn(e,t)}canExecute(e){return this.insert()(e)}},ql=new z("strong"),Ul=new z("em"),Kl=new z("code"),Gl=new z("u"),Ql=new z("s"),Xl=new vt,Yl=new bt,Zl=new kt,ea=new Re(!0),ta=new Re(!1),na=new B(1),ia=new B(2),ra=new B(3),oa=new B(4),sa=new B(5),la=new B(6),aa=new Z("left"),ca=new Z("center"),ua=new Z("right"),pa=new Z("justify"),da=new Br,ha=new Fr,fa=new Yn("text_color","color"),ma=new Yn("text_background_color","backgroundColor"),ga=new Pe("increase"),xa=new Pe("decrease"),wa=new z("sup"),ya=new z("sub"),_a=new Le("undo"),va=new Le("redo");var Ct={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",indent:"Increase Indent",outdent:"Decrease Indent",superscript:"Superscript",subscript:"Subscript",undo:"Undo",redo:"Redo",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove",enterValidUrl:"Please enter a valid URL"},Mt=class{constructor(e={}){this.locals=Ct,this.get=t=>{let n=this.locals[t];return n?Tt(n)?n:Be(n):Be("")},this.locals=T(T({},Ct),e)}},$r=`
  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />
`,Wr=`
  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />
`,jr=`
<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
`,qr=`
<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>
`,Ur=`
<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>
`,Kr=`
<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
`,Gr=`
<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
`,Qr=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
`,Xr=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
`,Yr=`
<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>
`,Zr=`
<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
`,eo=`
<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>
`,to=`
<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>
`,no=`
<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>
`,io=`
<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>
`,ro=`
<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>
`,oo=`
<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>
`,so=`
  <g>
    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>
    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>
  </g>
`,lo=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>
`,ao='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',co='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',uo='<g><rect fill="none" height="20" width="20"/><path d="M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z"/></g>',po='<g><rect fill="none" height="20" width="20"/><path d="M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z"/></g>',ho='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>',fo='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/>',mo=20,go=20,xo="currentColor",Zn={bold:$r,italic:Wr,code:jr,underline:qr,strike:Ur,ordered_list:Kr,bullet_list:Gr,blockquote:Qr,link:Xr,unlink:Yr,image:Zr,align_left:eo,align_center:to,align_right:no,align_justify:io,text_color:ro,color_fill:oo,horizontal_rule:so,format_clear:lo,indent:ao,outdent:co,superscript:uo,subscript:po,undo:ho,redo:fo,path:"<path></path>"},St=class{static get(e,t=xo){let n=Zn[e];return n&&(n.includes("<path")||n.includes("<g"))?`
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill=${t}
          height=${mo}
          width=${go}
        >
          ${n}
        </svg>
      `:n}},It=(()=>{class i{constructor(){this.locals={},this.icons={}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=Fe({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),wo=(()=>{class i{constructor(t){this.config=t}get locals(){return new Mt(this.config.locals)}getIcon(t){return this.config.icons[t]?this.config.icons[t]:St.get(t)}static{this.\u0275fac=function(n){return new(n||i)(Ot(It,8))}}static{this.\u0275prov=Fe({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Un=i=>({locals:i.locals??{},icons:i.icons??{}}),yo=(()=>{class i{constructor(t){this.sanitizer=t}transform(t){return Xn(t)?t:this.sanitizer.bypassSecurityTrustHtml(t)}static{this.\u0275fac=function(n){return new(n||i)(Dt(zt,16))}}static{this.\u0275pipe=At({name:"sanitizeHtml",type:i,pure:!0})}}return i})();var _o=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=He({providers:[yo],imports:[Je,Rt]})}}return i})(),ze=new Nt("NgxEditorConfig"),Kn={locals:Ct,icons:Zn},ba=(()=>{class i{static forRoot(t=Kn){return{ngModule:i,providers:[{provide:ze,useValue:t},{provide:It,useFactory:Un,deps:[ze]}]}}static forChild(t=Kn){return{ngModule:i,providers:[{provide:ze,useValue:t},{provide:It,useFactory:Un,deps:[ze]},wo]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=He({imports:[Je,_o]})}}return i})(),vo=i=>i===null||i.length===0,Gn=i=>i!==null&&typeof i.length=="number",bo=i=>{if(!i)return!0;let{childCount:e,firstChild:t}=i;return!!(e===1&&t?.isTextblock&&t.content.size===0)},Qn=class{static required(e){return t=>{let n=e||ce,r=_t(t.value,n);return bo(r)?{required:!0}:null}}static maxLength(e,t){return n=>{let r=t||ce,s=_t(n.value,r).textContent;return Gn(s)&&s.length>e?{maxlength:{requiredLength:e,actualLength:s.length}}:null}}static minLength(e,t){return n=>{let r=t||ce,s=_t(n.value,r).textContent;return vo(s)||!Gn(s)?null:s.length<e?{minlength:{requiredLength:e,actualLength:s.length}}:null}}};var ka=typeof navigator<"u"?/Mac/.test(navigator.platform):!1;export{ba as a,Qn as b};
